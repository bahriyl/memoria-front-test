<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Локація місця поховання</title>
    <link rel="stylesheet" href="css/location.css" />

    <!-- Mapbox CSS -->
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet' />
    <link href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.css'
        rel='stylesheet' />

    <!-- Mapbox JS -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>
    <script
        src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.js'></script>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <button class="back-btn" type="button" aria-label="Назад" onclick="history.back()">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
            </button>
        </header>

        <section class="section-location">
            <div class="section-titlebar">
                <h1>Локація місця поховання</h1>
                <button id="loc-menu-btn" class="dots-btn" aria-label="Дії">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#585858" viewBox="0 0 24 24">
                        <circle cx="12" cy="5" r="2"></circle>
                        <circle cx="12" cy="12" r="2"></circle>
                        <circle cx="12" cy="19" r="2"></circle>
                    </svg>
                </button>
                <div id="loc-menu" class="popup-menu hidden">
                    <div id="loc-change" class="popup-option">Змінити</div>
                </div>
            </div>
            <!-- карта/картка далі без змін -->
            <section class="card geo-card"> … </section>
        </section>

        <!-- Photo upload section - restructured like ritual service -->
        <section class="section-photos">
            <div class="section-titlebar">
                <h2>Фото місця поховання</h2>
                <button id="photo-menu-btn" class="dots-btn" aria-label="Дії">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#585858" viewBox="0 0 24 24">
                        <circle cx="12" cy="5" r="2"></circle>
                        <circle cx="12" cy="12" r="2"></circle>
                        <circle cx="12" cy="19" r="2"></circle>
                    </svg>
                </button>
                <div id="photo-menu" class="popup-menu hidden">
                    <div id="btn-add-photo" class="popup-option">Добавити</div>
                    <div id="btn-select-photo" class="popup-option">Вибрати</div>
                </div>
            </div>

            <div class="ritual-btn-row" id="photo-btn-row"></div>
            <input type="file" id="file-input" accept="image/*" multiple hidden />
            <div id="image-grid" class="image-grid"></div>
        </section>

        <!-- Landmarks section -->
        <section class="section-landmarks">
            <div class="section-titlebar">
                <h2>Орієнтири</h2>
                <button id="landmarks-menu-btn" class="dots-btn" aria-label="Дії">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#585858" viewBox="0 0 24 24">
                        <circle cx="12" cy="5" r="2"></circle>
                        <circle cx="12" cy="12" r="2"></circle>
                        <circle cx="12" cy="19" r="2"></circle>
                    </svg>
                </button>
                <div id="landmarks-menu" class="popup-menu hidden">
                    <div id="landmarks-change" class="popup-option">Змінити</div>
                </div>
            </div>
        </section>
        <p id="landmarks-display" style="display:none;" class="landmarks-text"></p>
        <div id="landmarks-controls" class="landmarks-controls" style="display:none;">
            <button id="landmarks-cancel" class="btn btn-secondary">Скасувати</button>
            <button id="landmarks-done" class="btn landmarks-save">Готово</button>
        </div>
        <textarea id="landmarks" style="display:none;"
            placeholder="Вкажіть орієнтири для полегшення пошуку місця поховання..."></textarea>

        <div id="form-error" class="form-error" style="display:none;" aria-live="polite"></div>
    </div>

    <button id="btn-submit" class="submit-btn" style="display:none;">Додати локацію</button>

    <!-- Success Modal -->
    <div id="modal-overlay" class="modal-overlay" hidden></div>
    <div id="success-modal" class="modal" hidden>
        <button id="modal-close" class="modal-close">&times;</button>
        <p class="modal-text">
            Локацію додано успішно
        </p>
        <button id="modal-ok" class="modal-ok">Готово</button>
    </div>

    <!-- Update Success Modal -->
    <div id="update-modal" class="modal" hidden>
        <p class="modal-text">Локацію успішно змінено</p>
        <button id="update-modal-ok" class="modal-ok">Готово</button>
    </div>

    <!-- Photo Limit Modal -->
    <div id="photo-limit-modal" class="modal" hidden>
        <p id="photo-limit-title" class="modal-title">Фото не додано</p>
        <p id="photo-limit-text" class="modal-text"></p>
        <button id="photo-limit-ok" class="modal-ok">Готово</button>
    </div>

    <!-- Confirm Change Location Modal -->
    <div id="confirm-modal" class="modal" hidden>
        <button id="confirm-close" class="modal-close" aria-label="Закрити"><svg viewBox="0 0 30 30" width="28"
                height="28" aria-hidden="true">
                <path d="M7 7l10 10M17 7L7 17" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path>
            </svg></button>
        <p class="modal-title">Змінити локацію</p>
        <p class="modal-text">Знаходьтеся поруч із місцем поховання, щоб координати були точними!</p>
        <div class="modal-actions">
            <button id="confirm-ok" class="modal-ok">Змінити локацію</button>
        </div>
    </div>

    <!-- Confirm Delete Photos Modal -->
    <div id="modal-overlay" class="modal-overlay" hidden></div>
    <div id="confirm-delete-modal" class="modal" hidden>
        <button id="confirm-delete-close" class="modal-close" aria-label="Закрити"><svg viewBox="0 0 30 30" width="28"
                height="28" aria-hidden="true">
                <path d="M7 7l10 10M17 7L7 17" stroke="#90959C" stroke-width="2" stroke-linecap="round"></path>
            </svg></button>
        <p id="confirm-delete-modal-text" class="modal-text">Видалити вибрані фотографії?</p>
        <div class="modal-actions">
            <button id="confirm-delete-cancel" class="modal-cancel">Скасувати</button>
            <button id="confirm-delete-ok" class="modal-ok">Видалити</button>
        </div>
    </div>

    <script src="js/location.js"></script>
  <script src="js/modal_scroll_lock.js"></script>
</body>

</html>
